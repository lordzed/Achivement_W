<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achievement viewer</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <button id="hub-button">Open Hub</button>
    <div class="container">
        <header>
            <h1>ğŸ® Achievement viewer</h1>
        </header>

        <div id="info" class="info" style="display: none;">
            <h3>ğŸ“ Folder Structure:</h3>
        <p>Place each game's achievement file (<code>achievements.json</code> or <code>&lt;game-appid&gt;.db</code>)</p>
        <p>in the respective AppId folder at <code>AppID/&lt;game-appid&gt;/</code> on the <code>user</code> branch</p>
            <p style="margin-top: 10px;">The page will automatically scan all folders in the AppID directory!</p>
        </div>

        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
            <div>Scanning AppID folders...</div>
        </div>

        <div id="summary" style="display: none;"></div>
        <div id="results"></div>
        <div id="detail-view" class="game-detail-view"></div>
    </div>

    <script type="module">
        import { init } from './js/GameLoader.js';
        import { displayGames, showGameDetail, hideGameDetail, setSortMode, setGridSortMode } from './js/GameRenderer.js';
        
        // Expose functions to window for onclick handlers
        window.showGameDetail = showGameDetail;
        window.hideGameDetail = hideGameDetail;
        window.setSortMode = setSortMode;
        window.setGridSortMode = setGridSortMode;
        
        // Initialize on page load
        init().then(() => {
            displayGames();
        });
    </script>
    <script>
      const hubBtn = document.getElementById('hub-button');
      if (hubBtn) {
        hubBtn.addEventListener('click', () => {
          window.location.href = 'hub.html';
        });
      }
    </script>
  </body>
</html>
